<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä½•å¿…çƒ¦å¿§</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/js/skel.min.js"></script>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.all.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/css/other.css?66886666">
    <link rel="icon" type="image/x-icon" href="https://github.com/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/css/sweetalert.css">
	<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/js/sweetalert-dev.js"></script>
</head>

<body class="landing">
 <script type="text/javascript" color="255,255,255" opacity='0.7' zIndex="auto" count="200" src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script> 
    <div id="page-wrapper">
    
        <section id="banner">
            <div class="inner">
                <h2>äººç”Ÿè‹¦çŸ­ï¼Œä½•å¿…çƒ¦å¿§</h2>
                <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ä½¿ç”¨</p>
                <ul class="actions">
                <div>
		<img id="qrcode" height="170em" src="./ok.svg" />
		</div>
		    <li><a id="GetQrCode"  class="button" onclick="GetQrCode()" title="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</a>
                    <li><a id="jumpapp" href="#"  class="button" title="APPç™»å½•">è·³è½¬äº¬ä¸œAPPæ·»åŠ </a>
                    <!--<li><a id="login" class="button special" title="APPç™»å½•" href="./login.html">æ§åˆ¶ä¸­å¿ƒ</a>-->
                    <!--<li><a id="BeanChange" class="button special" title="èµ°åŠ¿å›¾" href="./BeanChange.html">èµ°åŠ¿å›¾</a>-->
                    </li>
                </ul>
                <p>
                    <!--<a href="http://www.highdimen.com" target="_blank" style="color:yellow;font-weight:bold">[å¤‡ç”¨æ‰«ç ]</a>-->
                    <!--<a href="https://t.me/jstool" target="_blank" style="color:red;font-weight:bold"> [TGç¾¤]</a><br>-->
                    <!--<a style="color:#00effb;font-weight:bold"> [å…¨è‡ªåŠ¨è¿è¡Œ]</a>-->
                    <br /> <a style="font-size:12px;"> Appç¡®è®¤åå³å¯ï¼ˆæ— è§†å‡çº§æç¤ºï¼‰</a>
                    <br /> <a style="font-size:12px;">æœªæ·»åŠ è¿‡çš„ç”¨æˆ·ä¼šè‡ªåŠ¨æ–°å¢è´¦å·ï¼Œè‹¥å·²æ·»åŠ åˆ™ä¼šè‡ªåŠ¨æ›´æ–°æœ‰æ•ˆæœŸï¼ˆä¸€ä¸ªæœˆï¼‰</a>
                </p>

                <div class="more">
                   <!-- <a class="qq_group" id="qq_group" target="_blank" href="">
                        <img border="0" src="static/image/qq.png" alt="è”ç³»å®¢æœ" title="è”ç³»å®¢æœ">
                    </a>
                    <br /> <a id="UserNum" style="font-size:12px;"></a>-->
                    <br />æ¬¢è¿ğŸ§¡ä½¿ç”¨
                    
                </div>
            </div>
        </section>
    </div>
    <!--<div id="qrcontainer" class="hidden">
        <div class="qframe" id="qframe">
            <div id="refresh_qrcode" class="hidden">
                <div>
                    <h3>äºŒç»´ç å·²å¤±æ•ˆ</h3>
                    <div class="refresh">åˆ·æ–°</div>
                </div>
            </div>
            <div id="qrcode"></div>
            <div class="ps-box">
                <input type="text" id="ps" placeholder="å¯åœ¨æ­¤è¾“å…¥å¤‡æ³¨å">
            </div>
            <div class="info">
                <a style="color:#aaaaaa;">è¯·ä½¿ç”¨äº¬ä¸œAPPæ‰«ç </a>
                <br> <a style="color:#aaaaaa;">æœ‰æ•ˆæœŸä¸ºä¸€ä¸ªæœˆ</a>
                <br>
            </div>
            <div class="qframe-close" title="å…³é—­">âœ–</div>
        </div>
    </div>
	
 <div>
        </div>-->
</body>
<script>
    var timer;
    var qrcode = document.getElementById("qrcode")
    var loginUrl = ""
    var success = "https://ghproxy.com/https://raw.githubusercontent.com/cdle/jd_study/main/xdd/static/ok.svg";
    var jumpapp = document.getElementById('jumpapp')
    var hd = document.getElementById("hd")
  function GetQrCode() {
swal("è¯·åŠ¡å¿…çœ‹ä¸€é", "âœŒï¸äº¬ä¸œAPPæ‰«ç å é¡µé¢è·³è½¬å³ä¸ºæˆåŠŸâœŒï¸\nâ¤ï¸æ‰“å¼€APPå®Œæˆæ–°æ‰‹ä»»åŠ¡â¤ï¸\nâ£ï¸äº¬ä¸œâ£ï¸â¨æˆ‘çš„â¨æ›´å¤šå·¥å…·â¨(å†œåœºã€èŒå® ã€å·¥å‚ã€å® æ±ªæ±ªã€é‡‘æ¦œåˆ›é€ è¥ã€é¢†ç°é‡‘ã€å¥åº·ç¤¾åŒºã€ç§è±†å¾—è±†)\nâ£ï¸äº¬å–œâ£ï¸â¨æˆ‘çš„â¨(å†œåœºã€ç‰§åœºã€å·¥å‚ã€è´¢å¯Œå²›)\nâ£ï¸é‡‘èâ£ï¸â¨æˆ‘çš„â¨(ç§æ‘‡é’±æ ‘ã€å¤©å¤©æé¹…ã€å…»çŒªçŒª)\nâ˜‚ï¸äº¬ä¸œè´¦å·ç»‘å®šå¾®ä¿¡å¯ä»¥æ›´å¤šÂ¥Â¥â˜‚ï¸\nâ˜ ï¸è¯·å…³é—­å…å¯†æ”¯ä»˜â˜ ï¸","success")
  }
    function showQrcode() {
        var xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                data = JSON.parse(xmlhttp.responseText)
                if (data.url && data.url.indexOf("http") != -1) {
                    qrcode.src = "data:image/png;base64," + data.img
                    loginUrl = data.url
                } else {
                    showQrcode()
                }
            }
        }
        xmlhttp.open("GET", "/api/login/qrcode", true);
        xmlhttp.send();
    }
    showQrcode()

			function login() {
				var xmlhttp = window.XMLHttpRequest
					? new XMLHttpRequest()
					: new ActiveXObject("Microsoft.XMLHTTP");
				xmlhttp.onreadystatechange = function () {
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
						var results = xmlhttp.responseText;
						console.log(results);
						switch (results) {
							case "æˆæƒç™»å½•æœªç¡®è®¤":
								break;
							case "ç™»å½•":
								qrcode.src = success;
								clearInterval(timer);
								setTimeout(() => {
									window.location.href = "/admin"
								}, 1000);
								break;
							case "æˆåŠŸ":
								qrcode.src = success;
								clearInterval(timer);
								setTimeout(() => {}, 1000);
								break;
							default:
								showQrcode();
								break;
						}
					}
				};
				xmlhttp.open("GET", "/api/login/query", true);
				xmlhttp.send();
			}

    function polling() {
        timer = setInterval(() => {
            login()
        }, 1500);
    }
    polling()

    jumpapp.addEventListener('click', function() {
        if (loginUrl) {
            window.location.href = `openapp.jdmobile://virtual/ad?params=${encodeURI(
                JSON.stringify({
                    category: 'jump',
                    des: 'ThirdPartyLogin',
                    action: 'to',
                    onekeylogin: 'return',
                    url: loginUrl,
                    authlogin_returnurl: 'weixin://',
                    browserlogin_fromurl: window.location.host,
                })
            )}`;
        } else {
            alert('è¿˜æ²¡åŠ è½½å¥½ï¼Œè¯·ç¨åé‡è¯•');
        }
    })
</script>
</html>
